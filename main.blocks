<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="fBrg9*s1e|`?7Wdl!!^2">i</variable><variable id="|!XD^NO=5wY0x8j3Y#eA">inventario</variable><variable id="1Q:?x}:jUgjmvQ6,$c%_">miJugador</variable><variable id="WA^k}Lo,zIaYIQ]07Bai">paquetesNecesarios</variable></variables><comment id="w#Ugq$:KCDI^Sr_UW-%Q" x="0" y="862" w="310" h="120">
Activa la fase final del juego.

[cite: 57]
</comment><comment id=":j/$3uzCu{Ow{yPOX2M1" x="355" y="862" w="480" h="120">
--- VARIABLES GLOBALES (Abasto de variables) ---
</comment><block type="pxt-on-start" id="Hb_a[L*bU?K@D)nm=Lf+" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="5)!h#$}Kt!pT(H$atu$@"><field name="VAR" id="WA^k}Lo,zIaYIQ]07Bai">paquetesNecesarios</field><comment pinned="false" h="80" w="160">Estructura de datos compleja: Vector/Lista</comment><value name="VALUE"><shadow type="math_number" id="Bhe/0Ku;KHpNeVe2#uJ;"><field name="NUM">3</field></shadow></value></block></statement></block><block type="gameupdate" id="MGOzao]5PH9lQ~ZUJTgk" x="417" y="0"><comment pinned="false" h="80" w="160">Evento que se ejecuta constantemente para actualizar la GUI técnica [cite: 58]</comment><statement name="HANDLER"><block type="function_call" id="fvxi/]i]%EZBdAH]D6v_"><mutation name="dibujarInterfazTecnica" functionid="=RTJPKj%Oj+wQOYf#Xg2"></mutation></block></statement></block><block type="function_definition" id="RNkzy-@c(Co2*KgAA_u`" x="762" y="0"><mutation name="procesarDano" functionid="R%qrGQ%I5S;h%{|[g9Sr"></mutation><field name="function_name">procesarDano</field><comment pinned="false" h="80" w="160">Lógica técnica para procesar el daño de los enemigos.
[cite: 39]</comment><statement name="STACK"><block type="hudChangeLifeBy" id=":*%bR@OLjVp0avp)U}?K"><value name="value"><shadow type="math_number" id="NPlu8n8Bna;apIL[[%NS"><field name="NUM">-1</field></shadow></value><next><block type="camerashake" id="r*F%_{;7+26cunn*~$;a"><value name="amplitude"><shadow type="math_number_minmax" id="ljcYn`PU{Wr7#Zm@:Yu:"><mutation min="1" max="8" precision="0"></mutation><field name="SLIDER">4</field></shadow></value><value name="duration"><shadow type="timePicker" id="M4Z]D|be:D./mAtE0LOC"><field name="ms">500</field></shadow></value><next><block type="spritesay" id="3bI?h0l0?:n1x=QN7HTM"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="1" _input_init="true"></mutation><value name="sprite"><block type="variables_get" id="G}dODTH/2lSvDWI?pz^g"><field name="VAR" id="1Q:?x}:jUgjmvQ6,$c%_">miJugador</field></block></value><value name="text"><shadow type="text" id="mL/qI~c=%8ebuSN6Fe/F"><field name="TEXT">¡ERROR!</field></shadow></value><value name="millis"><shadow type="timePicker" id="q$?|jamS]ov};{+*V5k0"><field name="ms">500</field></shadow></value><next><block type="Sprite_blockCombine_change" id="ISFp_4d{5s`UB|91#*QF"><field name="propiedad">Sprite.x@set</field><comment pinned="false" h="80" w="160">Pequeño retroceso para evitar perder vidas seguidas</comment><value name="mySprite"><block type="variables_get" id="p8hPRt}SIoP#WxiWa~.n"><field name="VAR" id="1Q:?x}:jUgjmvQ6,$c%_">miJugador</field></block></value><value name="value"><shadow type="math_number" id="`v:6?9)pE^4?W/:`o|Wc"><field name="NUM">10</field></shadow></value></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="d,7gk31`xT+qI=[i)m3(" x="1317" y="0"><mutation name="gestionarInventario" functionid="E{xIxEUz1@O04$]/3G)X"><arg name="objeto" id="0ralyuh3p5h7c5tru3r" type="string"></arg></mutation><field name="function_name">gestionarInventario</field><comment pinned="false" h="80" w="160">Gestiona la recolección de objetos de forma modular.
@param objeto Nombre del ítem recogido
[cite: 39, 59]</comment><value name="0ralyuh3p5h7c5tru3r"><block type="argument_reporter_string" id="Ck_=f%.5]2JQ6Pi`4,M9"><mutation duplicateondrag="true"></mutation><field name="VALUE">objeto</field></block></value><statement name="STACK"><block type="array_push" id="qrXaZ,S+U?u;HWsOGQ0b"><value name="list"><block type="variables_get" id="+[Q!~J-*}dgZAA[|UH#c"><field name="VAR" id="|!XD^NO=5wY0x8j3Y#eA">inventario</field></block></value><value name="value"><block type="argument_reporter_string" id="18^V}v{ZrU9q1zOx^b,?"><field name="VALUE">objeto</field></block></value><next><block type="mixer_play_sound" id="R{Xq`5~Wd36Z]?By}N4+"><field name="sound">music.baDing</field><next><block type="gameSplash" id="yPz|5r=9ubkkR6IsxbN8"><mutation xmlns="http://www.w3.org/1999/xhtml" _expanded="0" _input_init="true"></mutation><value name="title"><shadow type="text" id="+$NZ((C~7)6u!jM6rX(T"><field name="TEXT"></field></shadow><block type="text_join" id="|2sC.uPCx8dEHIJ.aX[b"><mutation items="2"></mutation><value name="ADD0"><shadow type="text" id="f+gS9v~:P#U%A//g9`bj"><field name="TEXT">Recuperado: </field></shadow></value><value name="ADD1"><shadow type="text" id="i%D=Dwc^S|}7*VhRUixK"><field name="TEXT"></field></shadow><block type="argument_reporter_string" id="rz(;n1TZ.K-Ac(VmZb*P"><field name="VALUE">objeto</field></block></value></block></value><next><block type="controls_if" id=")}(yG6IaX2WJ;PFgeKc^"><comment pinned="false" h="80" w="160">Verifica si se ha alcanzado el objetivo para el final del juego [cite: 57]</comment><value name="IF0"><shadow type="logic_boolean" id="Uj/{IjVh{y#?,IN#M=4o"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="GFIyFd(Z_A3uQr9$]2gZ"><field name="OP">GTE</field><value name="A"><shadow type="math_number" id="AC@4oc=8fX5hp4LppNts"><field name="NUM">0</field></shadow><block type="lists_length" id="xdci134LQ]atSEoIO/NX"><value name="VALUE"><block type="variables_get" id="?5^.K!J+?$0:bRz[8/jo"><field name="VAR" id="|!XD^NO=5wY0x8j3Y#eA">inventario</field></block></value></block></value><value name="B"><shadow type="math_number" id="smG=*GyUE=nC]%IF}Bel"><field name="NUM">0</field></shadow><block type="variables_get" id="m9;bFBd_~4*]H|-3pGj#"><field name="VAR" id="WA^k}Lo,zIaYIQ]07Bai">paquetesNecesarios</field></block></value></block></value><statement name="DO0"><block type="function_call" id="pGBwBHAj1@^A0r9SdPM["><mutation name="desbloquearFinal" functionid="Q;|O%O@VVE~?Ps]4`?ht"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="uTs.f$e!@l1d0($T/+U^" x="0" y="451"><mutation name="inicializarSistema" functionid="_gQyZU}$~c_+2;4)gNw|"></mutation><field name="function_name">inicializarSistema</field><comment pinned="false" h="80" w="160">Inicializa los valores técnicos del sistema.
[cite: 39, 59]</comment><statement name="STACK"><block type="variables_set" id="-?2Q(M=uuINfON@*Id}+"><field name="VAR" id="|!XD^NO=5wY0x8j3Y#eA">inventario</field><value name="VALUE"><shadow type="math_number" id="O{T}zj`+YvaQBj,5/3?!"><field name="NUM">0</field></shadow><block type="lists_create_with" id="+rg7(k%3az8ii/8CbV=m"><mutation items="0" horizontalafter="3"></mutation></block></value><next><block type="hudsetScore" id="ukz5/js@I8//owb?DJ.8"><value name="value"><shadow type="math_number" id="Y:;#8vM})XtothF{KYF~"><field name="NUM">0</field></shadow></value><next><block type="hudSetLife" id="E0e)c;BSYuyrU[Pdd0Zx"><value name="value"><shadow type="math_number" id="Y8p{lJdZE`mj91e4$s$6"><field name="NUM">3</field></shadow></value></block></next></block></next></block></statement></block><block type="function_definition" id="gU~#3jUy7TsV-1PVu1X(" x="444" y="451"><mutation name="dibujarInterfazTecnica" functionid="=RTJPKj%Oj+wQOYf#Xg2"></mutation><field name="function_name">dibujarInterfazTecnica</field><comment pinned="false" h="80" w="160">Funcionalidad Extra: Dibuja un mini-indicador de progreso en pantalla.</comment><data>0;1</data><statement name="STACK"><block type="Image_fillRect" id="brHzmF)b.dEvPVD?vw$N"><value name="picture"><block type="typescript_expression" id="d4O)`1R~pS_w?QPVX`9h"><field name="EXPRESSION">//  Dibuja un fondo para el mini-mapa/inventario en la esquina
    screen</field></block></value><value name="x"><shadow type="math_number" id="I?c]PL!,-4I6@oEQ#{1A"><field name="NUM">2</field></shadow></value><value name="y"><shadow type="math_number" id="$iB?_c@6~xNR)p+F7~,j"><field name="NUM">2</field></shadow></value><value name="w"><shadow type="math_number" id="*}lhOtBS/M;}jXPZgrnN"><field name="NUM">22</field></shadow></value><value name="h"><shadow type="math_number" id="_4%^C^r%7n-z~Sr)X.lL"><field name="NUM">8</field></shadow></value><value name="c"><shadow type="colorindexpicker" id="_XRl^K4raE6U@$;1F7v@"><field name="index">15</field></shadow></value><next><block type="device_while" id="(I]+Dq[e1oz_NXOrI*.N"><value name="COND"><shadow type="logic_boolean" id="P=d[P-ntA9T=luJPkLfc"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="{-dT1oK,o1+nUY9@ng!9"><field name="OP">LTE</field><value name="A"><shadow type="math_number" id="tw*q)$=,Z^q-(GFkDRdN"><field name="NUM">0</field></shadow><block type="variables_get" id="Ko|R158oZF(1lQ|.M4-}"><field name="VAR" id="fBrg9*s1e|`?7Wdl!!^2">i</field></block></value><value name="B"><shadow type="math_number" id="6)^~Az^a`6SEuv*#,dVp"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="9C/m_,Wp5X;e6p+/e3Y/"><field name="OP">MINUS</field><value name="A"><shadow type="math_number" id="5Dv=bo^bGmu3%G?A:;#Z"><field name="NUM">0</field></shadow><block type="lists_length" id="pKmKGMTFN?4_/^)UF-1T"><value name="VALUE"><block type="variables_get" id="(lJ7UYHVg4s,,A-zDcLq"><field name="VAR" id="|!XD^NO=5wY0x8j3Y#eA">inventario</field></block></value></block></value><value name="B"><shadow type="math_number" id="ma^)aj9^HKr;6T4Z,u)$"><field name="NUM">1</field></shadow></value></block></value></block></value><statement name="DO"><block type="Image_setPixel" id="r{mDd{uu[OvDP1jz-uXo"><value name="picture"><block type="typescript_expression" id="3{TJcrvKU:a.%in4ke[E"><field name="EXPRESSION">//  Dibuja un punto verde por cada objeto en el inventario
        screen</field></block></value><value name="x"><block type="math_arithmetic" id="LkMNL4c(i3|Cu7A`jVuw"><field name="OP">ADD</field><value name="A"><shadow type="math_number" id=":Uor,3RiaqlUXdYGy-3?"><field name="NUM">4</field></shadow></value><value name="B"><shadow type="math_number" id="_,M7NQ[A?)orr;m0)(1a"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="LNQVObaQcK?(t}#+a=bT"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number" id="L:b$cz76F/64sCxs_+fN"><field name="NUM">0</field></shadow><block type="variables_get" id="OY)]xGXJ;uz19Uz8BM4`"><field name="VAR" id="fBrg9*s1e|`?7Wdl!!^2">i</field></block></value><value name="B"><shadow type="math_number" id="~?5PDY,v16`qe[2[2AQ/"><field name="NUM">6</field></shadow></value></block></value></block></value><value name="y"><shadow type="math_number" id="h6`h(5vzVWh^=V!-[~k%"><field name="NUM">5</field></shadow></value><value name="c"><shadow type="colorindexpicker" id="Y~]Y1khS4ZJjx6%qk64z"><field name="index">7</field></shadow></value><next><block type="variables_change" id=".XDO+[=O(.9?w;%J-|un"><field name="VAR" id="fBrg9*s1e|`?7Wdl!!^2">i</field><value name="VALUE"><shadow type="math_number" id="e!wX!J#%v//Klq2`#KV*"><field name="NUM">1</field></shadow></value></block></next></block></statement></block></next></block></statement></block><block type="function_definition" id="9h/n7oW9})|j`e(jJOIT" x="1625" y="451"><mutation name="desbloquearFinal" functionid="Q;|O%O@VVE~?Ps]4`?ht"></mutation><field name="function_name">desbloquearFinal</field><comment pinned="false" h="80" w="160">Aquí Persona B debería cambiar el mapa o abrir una puerta</comment><statement name="STACK"><block type="game_show_long_text" id="CF[-I3x.T;x:,GuPX.q9"><field name="layout">DialogLayout.Bottom</field><value name="str"><shadow type="text" id="$P7.jl?UFBTxI}+RBh/y"><field name="TEXT">SISTEMA REPARADO. Busca la salida.</field></shadow></value></block></statement></block></xml>